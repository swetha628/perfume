{"ast":null,"code":"var _jsxFileName = \"/home/abservetech/absera_academy_projects/perfume/perfume-shop/frontend/src/components/CheckoutForm.js\",\n  _s = $RefreshSig$();\n// src/components/CheckoutForm.js\nimport React, { useState } from 'react';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CheckoutForm = () => {\n  _s();\n  const stripe = useStripe();\n  const elements = useElements();\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setLoading(true);\n    if (!stripe || !elements) {\n      setErrorMessage('Stripe.js has not yet loaded. Please try again later.');\n      setLoading(false);\n      return;\n    }\n    const cardElement = elements.getElement(CardElement);\n    try {\n      // Create payment method\n      const {\n        error,\n        paymentMethod\n      } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement\n      });\n      if (error) {\n        setErrorMessage(error.message);\n        setLoading(false);\n        return;\n      }\n\n      // Confirm the payment on the server\n      const response = await fetch('/api/payment/confirm', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          paymentMethodId: paymentMethod.id\n        })\n      });\n      const result = await response.json();\n      if (result.error) {\n        setErrorMessage(result.error.message);\n      } else {\n        setSuccessMessage('Payment successful!');\n      }\n    } catch (error) {\n      setErrorMessage('An unexpected error occurred.');\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Card details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardElement, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 24\n    }, this), successMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green'\n      },\n      children: successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 26\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: !stripe || loading,\n      children: loading ? 'Processing...' : 'Pay'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(CheckoutForm, \"ebh3y1DJwNwaXx+WAlJx3NMTMKQ=\", false, function () {\n  return [useStripe, useElements];\n});\n_c = CheckoutForm;\nexport default CheckoutForm;\nvar _c;\n$RefreshReg$(_c, \"CheckoutForm\");","map":{"version":3,"names":["React","useState","CardElement","useStripe","useElements","jsxDEV","_jsxDEV","CheckoutForm","_s","stripe","elements","loading","setLoading","errorMessage","setErrorMessage","successMessage","setSuccessMessage","handleSubmit","event","preventDefault","cardElement","getElement","error","paymentMethod","createPaymentMethod","type","card","message","response","fetch","method","headers","body","JSON","stringify","paymentMethodId","id","result","json","console","onSubmit","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","disabled","_c","$RefreshReg$"],"sources":["/home/abservetech/absera_academy_projects/perfume/perfume-shop/frontend/src/components/CheckoutForm.js"],"sourcesContent":["// src/components/CheckoutForm.js\nimport React, { useState } from 'react';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\n\nconst CheckoutForm = () => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const [loading, setLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [successMessage, setSuccessMessage] = useState('');\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    setLoading(true);\n\n    if (!stripe || !elements) {\n      setErrorMessage('Stripe.js has not yet loaded. Please try again later.');\n      setLoading(false);\n      return;\n    }\n\n    const cardElement = elements.getElement(CardElement);\n\n    try {\n      // Create payment method\n      const { error, paymentMethod } = await stripe.createPaymentMethod({\n        type: 'card',\n        card: cardElement,\n      });\n\n      if (error) {\n        setErrorMessage(error.message);\n        setLoading(false);\n        return;\n      }\n\n      // Confirm the payment on the server\n      const response = await fetch('/api/payment/confirm', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ paymentMethodId: paymentMethod.id }),\n      });\n\n      const result = await response.json();\n\n      if (result.error) {\n        setErrorMessage(result.error.message);\n      } else {\n        setSuccessMessage('Payment successful!');\n      }\n    } catch (error) {\n      setErrorMessage('An unexpected error occurred.');\n      console.error(error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <label>Card details</label>\n        <CardElement />\n      </div>\n      {errorMessage && <p style={{ color: 'red' }}>{errorMessage}</p>}\n      {successMessage && <p style={{ color: 'green' }}>{successMessage}</p>}\n      <button type=\"submit\" disabled={!stripe || loading}>\n        {loading ? 'Processing...' : 'Pay'}\n      </button>\n    </form>\n  );\n};\n\nexport default CheckoutForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}